<section class="bg-light py-3 py-md-5 py-xl-8">
  <div class="container">
    <div class="row justify-content-md-center">
      <div class="col-12 col-md-10 col-lg-8 col-xl-7 col-xxl-6">
        <h2 class="mb-4 display-5 text-center">New Job: Car</h2>

        <hr class="w-50 mx-auto mb-5 mb-xl-9 border-dark-subtle" />
      </div>
    </div>
  </div>

  <!--  -->
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="container-fluid">
          <div class="row gy-3 gy-md-4">
            <!--  -->
            <div class="row">
              <div class="col-12 mb-3 mb-lg-5">
                <input
                  class="form-control"
                  id="myInput"
                  type="text"
                  placeholder="Search.."
                />
              </div>
            </div>
            <div class="row">
              <div class="col-12 mb-3 mb-lg-5">
                <form
                  action="/requests/new/<%= service._id %>/newCar"
                  method="GET"
                >
                  <button class="btn btn-success" type="submit">
                    Add New Car
                  </button>
                </form>
              </div>
            </div>
            <!--  -->

            <div class="row">
              <div class="col-12 mb-3 mb-lg-5">
                <div class="overflow-hidden card table-nowrap table-card">
                  <div
                    class="card-header d-flex justify-content-between align-items-center"
                  >
                    <h5 class="mb-0">Cars</h5>
                  </div>
                  <div class="table-responsive">
                    <table class="table mb-0">
                      <thead class="small text-uppercase bg-body text-muted">
                        <tr>
                          <th>Car No.</th>
                          <th>Make</th>
                          <th>Model</th>
                          <th>Color</th>
                          <th>Owner</th>
                          <th>Phone</th>
                          <th class="text-end">Action</th>
                        </tr>
                      </thead>
                      <tbody id="myTable">
                        <!--  -->
                        <% cars.forEach(car => { %>

                        <tr class="align-middle">
                          <td><%= car.carNumber %></td>

                          <td><%= car.make %></td>
                          <td><%= car.model %></td>
                          <td><%= car.color %></td>
                          <td><%= car.ownerName %></td>
                          <td><%= car.contactNumber %></td>

                          <td class="text-end">
                            <form
                              action="/requests/new/<%= service._id %>/<%= car._id %>"
                              method="GET"
                            >
                              <button class="btn btn-success" type="submit">
                                Select
                              </button>
                            </form>
                          </td>
                        </tr>

                        <% }) %>
                        <!--  -->

                        <!--  -->
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <!--  -->
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!--  -->

<script>
  $(document).ready(function () {
    $('#myInput').on('keyup', function () {
      var value = $(this).val().toLowerCase()
      $('#myTable tr').filter(function () {
        $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
      })
    })
  })
</script>
